<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<title>D√†nh cho em ‚ùÑÔ∏è</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box}
body{
  margin:0;
  height:100vh;
  overflow:hidden;
  font-family:"Poppins",sans-serif;
  background:linear-gradient(135deg,#1e3c72,#2a5298,#6a82fb);
}

/* Tuy·∫øt r∆°i */
.snow{
  position:fixed;
  top:-10px;
  color:white;
  font-size:14px;
  animation:fall linear infinite;
  opacity:.8;
}
@keyframes fall{
  to{ transform:translateY(110vh); }
}

.container{
  position:relative;
  width:90%;
  height:90%;
  margin:auto;
  border:1.5px solid rgba(255,255,255,.6);
  border-radius:22px;
  backdrop-filter:blur(6px);
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  text-align:center;
}

h1{
  color:#fff;
  font-weight:600;
  margin-bottom:10px;
}
p{
  color:rgba(255,255,255,.9);
  min-height:26px;
}

.buttons{
  position:relative;
  width:320px;
  height:180px;
  margin-top:30px;
}

button{
  border:none;
  border-radius:999px;
  padding:14px 32px;
  font-size:18px;
  cursor:pointer;
  transition:.3s ease;
}

#yes{
  background:#fff;
  color:#2a5298;
  font-weight:600;
  position:absolute;
  left:40px;
  top:70px;
  box-shadow:0 8px 20px rgba(0,0,0,.3);
}

#no{
  background:rgba(255,255,255,.85);
  color:#2a5298;
  position:absolute;
  right:40px;
  top:70px;
}

.pulse{
  animation:pulse 1.3s infinite;
}
@keyframes pulse{
  0%{box-shadow:0 0 0 0 rgba(255,255,255,.6)}
  70%{box-shadow:0 0 0 22px rgba(255,255,255,0)}
  100%{box-shadow:0 0 0 0 rgba(255,255,255,0)}
}
</style>
</head>

<body>

<!-- üéµ Nh·∫°c n·ªÅn -->
<audio id="bgm" loop>
  <source src="music.mp3" type="audio/mpeg">
</audio>

<div class="container">
  <h1>TH√ÇN G·ª¨I T·ªöI LINH NH√Å <3 ‚ùÑÔ∏è</h1>
  <p id="msg">Anh c√≥ ƒëi·ªÅu mu·ªën n√≥i v·ªõi em n√® ‚Ä¶</p>

  <div class="buttons">
    <button id="yes">C√≥ ‚ù§Ô∏è</button>
    <button id="no">Kh√¥ng üíî</button>
  </div>
</div>

<script>
/* ‚ùÑÔ∏è T·∫°o tuy·∫øt r∆°i */
for(let i=0;i<40;i++){
  const snow=document.createElement("div");
  snow.className="snow";
  snow.innerText="‚ùÑÔ∏è";
  snow.style.left=Math.random()*100+"vw";
  snow.style.animationDuration=5+Math.random()*5+"s";
  snow.style.fontSize=10+Math.random()*10+"px";
  document.body.appendChild(snow);
}

/* üéµ ƒêi·ªÅu khi·ªÉn nh·∫°c ‚Äì ph√°t khi c√≥ t∆∞∆°ng t√°c */
const music = document.getElementById("bgm");
music.volume = 0.6;
let musicPlayed = false;

function playMusic(){
  if(musicPlayed) return;
  music.play().catch(()=>{});
  musicPlayed = true;
}

document.addEventListener("click", playMusic, { once:true });
document.addEventListener("touchstart", playMusic, { once:true });

/* ‚ù§Ô∏è Logic n√∫t */
const noBtn=document.getElementById("no");
const yesBtn=document.getElementById("yes");
const msg=document.getElementById("msg");

let step=0;
const MAX_STEP=6;
const MAX_SCALE=3.2;
const SAFE_RADIUS=160;

const messages=[
  "Em ƒë·ªçc k·ªπ nh√©‚Ä¶",
  "Suy nghƒ© k·ªπ ƒëi m√† üòä",
  "Anh suy nghƒ© l√¢u r·ªìi ‚ùÑÔ∏è",
  "Anh th·∫≠t s·ª± nghi√™m t√∫c ƒë·∫•y",
  "Anh mu·ªën ·ªü b√™n em m√†",
  "Anh Y√™u Em ‚ù§Ô∏è"
];

function centerYes(){
  const r=yesBtn.getBoundingClientRect();
  return {x:r.left+r.width/2,y:r.top+r.height/2};
}

function moveNo(){
  let x,y,d;
  const c=centerYes();
  do{
    x=Math.random()*(window.innerWidth-120);
    y=Math.random()*(window.innerHeight-80);
    d=Math.hypot(x-c.x,y-c.y);
  }while(d<SAFE_RADIUS);
  noBtn.style.position="fixed";
  noBtn.style.left=x+"px";
  noBtn.style.top=y+"px";
}

function handleNo(){
  playMusic();
  if(step>=MAX_STEP) return;
  step++;

  msg.innerText=messages[step-1];

  const scale=1+(MAX_SCALE-1)*(step/MAX_STEP);
  yesBtn.style.transform=`scale(${scale})`;

  noBtn.style.transform=`scale(${Math.max(.45,1-step*.1)})`;

  moveNo();

  if(step===MAX_STEP){
    noBtn.style.display="none";
    yesBtn.classList.add("pulse");
    yesBtn.innerText="üíñ C√ì üíñ";
  }
}

noBtn.addEventListener("mouseover", handleNo);
noBtn.addEventListener("touchstart", handleNo);

yesBtn.onclick=()=>{
  playMusic();
  alert("Anh bi·∫øt m√† ‚ù§Ô∏è\nC·∫£m ∆°n em v√¨ ƒë√£ ch·ªçn anh ‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è ‚ùÑÔ∏è");
};
</script>

</body>
</html>

