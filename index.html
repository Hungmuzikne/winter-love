<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">

<!-- Fix hi·ªÉn th·ªã mobile -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Love ‚ùÑÔ∏è</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box}

body{
  margin:0;
  height:100vh;
  overflow:hidden;
  font-family:"Poppins",sans-serif;
  background:
    linear-gradient(rgba(0,0,0,0.45),rgba(0,0,0,0.45)),
    url("winter-bg.jpg") center/cover no-repeat fixed;
}

/* Container */
.container{
  position:relative;
  width:90%;
  height:90%;
  margin:auto;
  border-radius:22px;
  backdrop-filter:blur(8px);
  background:rgba(255,255,255,0.06);
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  text-align:center;
  color:#fff;
  padding:20px;
}

h1{
  font-weight:600;
  margin-bottom:10px;
  font-size:28px;
}

p{
  min-height:28px;
  font-size:17px;
  opacity:.95;
}

/* Buttons */
.buttons{
  position:relative;
  width:320px;
  height:180px;
  margin-top:30px;
}

button{
  border:none;
  border-radius:999px;
  padding:14px 32px;
  font-size:18px;
  cursor:pointer;
  transition:.3s ease;
}

#yes{
  background:#fff;
  color:#1f3b4d;
  font-weight:600;
  position:absolute;
  left:40px;
  top:70px;
  box-shadow:0 8px 20px rgba(0,0,0,.3);
}

#no{
  background:rgba(255,255,255,.85);
  color:#1f3b4d;
  position:absolute;
  right:40px;
  top:70px;
}

/* Pulse */
.pulse{
  animation:pulse 1.4s infinite;
}
@keyframes pulse{
  0%{box-shadow:0 0 0 0 rgba(255,255,255,.6)}
  70%{box-shadow:0 0 0 22px rgba(255,255,255,0)}
  100%{box-shadow:0 0 0 0 rgba(255,255,255,0)}
}

/* Tuy·∫øt m√πa ƒë√¥ng */
.snowflake{
  position:fixed;
  top:-10px;
  background:white;
  border-radius:50%;
  pointer-events:none;
  filter:blur(.5px);
  animation:fall linear infinite;
}

@keyframes fall{
  to{ transform:translateY(110vh); }
}

/* After yes */
.after{
  font-size:20px;
  max-width:520px;
  line-height:1.6;
  animation:fadeIn 2s ease;
}

@keyframes fadeIn{
  from{opacity:0; transform:translateY(20px)}
  to{opacity:1; transform:translateY(0)}
}

/* üì± Mobile */
@media (max-width:768px){
  .container{
    width:94%;
    height:94%;
    padding:24px;
  }

  h1{font-size:22px}
  p{font-size:16px}

  .buttons{
    width:100%;
    height:160px;
  }

  button{
    font-size:18px;
    padding:16px 34px;
  }

  #yes{left:20px; top:60px}
  #no{right:20px; top:60px}

  .after{
    font-size:18px;
    padding:0 10px;
  }
}
</style>
</head>

<body>

<!-- üéµ Nh·∫°c -->
<audio id="bgm" loop>
  <source src="music.mp3" type="audio/mpeg">
</audio>

<div class="container" id="box">
  <h1>G·ª≠i LINH TH√ÇN IUUU N√à ‚ù§Ô∏è ‚ùÑÔ∏è</h1>
  <p id="msg">ƒê·ªíNG √ù L√ÄM NG∆Ø·ªúI Y√äU ANH NH√â !</p>

  <div class="buttons" id="btnBox">
    <button id="yes">C√≥ ‚ù§Ô∏è</button>
    <button id="no">Kh√¥ng üíî</button>
  </div>
</div>

<script>
/* üéµ Nh·∫°c */
const music=document.getElementById("bgm");
music.volume=0.6;
let played=false;
function playMusic(){
  if(played) return;
  music.play().catch(()=>{});
  played=true;
}
document.addEventListener("click",playMusic,{once:true});
document.addEventListener("touchstart",playMusic,{once:true});

/* ‚ùÑÔ∏è TUY·∫æT ‚Äì NHI·ªÄU + C√ì CHI·ªÄU S√ÇU */
const snowCount = window.innerWidth < 768 ? 80 : 130;

for(let i=0;i<snowCount;i++){
  const s=document.createElement("div");
  s.className="snowflake";

  const size=Math.random()*3+1;
  s.style.width=size+"px";
  s.style.height=size+"px";
  s.style.left=Math.random()*100+"vw";
  s.style.opacity=Math.random()*0.5+0.25;

  // Tuy·∫øt xa ch·∫≠m, tuy·∫øt g·∫ßn nhanh h∆°n
  s.style.animationDuration =
    (size < 2 ? 26 : 16) + Math.random()*20 + "s";

  document.body.appendChild(s);
}

/* ‚ù§Ô∏è Logic */
const noBtn=document.getElementById("no");
const yesBtn=document.getElementById("yes");
const msg=document.getElementById("msg");
const box=document.getElementById("box");
const btnBox=document.getElementById("btnBox");

let step=0;
const MAX_STEP=6;
const MAX_SCALE=3.1;
const SAFE=160;

const texts=[
  "Sao ƒë√£ t·ª´ ch·ªëi v·ªôi v√†ng th·∫ø :(((",
  "Anh kh√¥ng n√≥i ƒë√πa ƒë√¢u",
  "Anh suy nghƒ© l√¢u r·ªìi ‚ùÑÔ∏è",
  "Anh th·∫≠t s·ª± nghi√™m t√∫c v·ªõi em",
  "Anh mu·ªën ·ªü b√™n em",
  "HIHI‚Ä¶"
];

function centerYes(){
  const r=yesBtn.getBoundingClientRect();
  return {x:r.left+r.width/2,y:r.top+r.height/2};
}

function moveNo(){
  let x,y,d;
  const c=centerYes();
  do{
    x=Math.random()*(window.innerWidth-120);
    y=Math.random()*(window.innerHeight-80);
    d=Math.hypot(x-c.x,y-c.y);
  }while(d<SAFE);
  noBtn.style.position="fixed";
  noBtn.style.left=x+"px";
  noBtn.style.top=y+"px";
}

function handleNo(){
  playMusic();
  if(step>=MAX_STEP) return;

  step++;
  msg.innerText=texts[step-1];

  yesBtn.style.transform=`scale(${1+(MAX_SCALE-1)*(step/MAX_STEP)})`;
  noBtn.style.transform=`scale(${Math.max(.45,1-step*.1)})`;

  moveNo();

  if(step===MAX_STEP){
    noBtn.style.display="none";
    yesBtn.classList.add("pulse");
    yesBtn.innerText="üíñ C√ì üíñ";
  }
}

noBtn.addEventListener("mouseover",handleNo);
noBtn.addEventListener("touchstart",handleNo);

/* üíñ AFTER YES */
yesBtn.onclick=()=>{
  playMusic();
  btnBox.remove();
  msg.remove();

  const after=document.createElement("div");
  after.className="after";
  after.innerHTML=
    "C·∫£m ∆°n em v√¨ ƒë√£ cho anh c∆° h·ªôi.<br><br>"+
    "Anh kh√¥ng h·ª©a ƒëi·ªÅu g√¨ to t√°t,<br>"+
    "ch·ªâ h·ª©a s·∫Ω lu√¥n nghi√™m t√∫c<br>"+
    "v√† tr√¢n tr·ªçng em ‚ùÑÔ∏è";

  box.appendChild(after);
};
</script>

</body>
</html>
